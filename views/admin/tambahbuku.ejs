<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIPEDI - Tambah Buku</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
  <style>
      /* Custom background color with 33% opacity */
      .bg-custom {
        background-color: #E9F1ED;
      }
  </style>
  
</head>
<body class="bg-green-50 flex ml-56">

  <!-- Sidebar -->
  <%- include('../partials/asideAdmin') %>

  <!-- Content -->
  <div class="flex-1 p-12">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-semibold">Tambah Buku</h1>
    </div>

    <!-- Form Tambah Buku -->
    <div class="bg-white shadow-md rounded-lg p-10">
      <form action="/databuku" method="POST" enctype="multipart/form-data">
        <div class="grid grid-cols-2 gap-x-10 gap-y-6">
      <!-- Baris 1 -->
      <div class="col-span-2">
        <label for="judul_buku" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Judul Buku</label>
        <input type="text" id="judul_buku" name="judul_buku" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>

      <!-- Baris 2 -->
      <div class="col-span-2">
        <label class="block text-xs font-semibold text-[#2f6f4e] mb-1">Jenis Buku</label>
        <div class="mt-1 flex items-center space-x-6">
          <input type="checkbox" id="buku_fisik" name="jenis_buku[]" value="Buku Fisik" checked class="mr-2">
          <label for="buku_fisik" class="mr-6">Buku Fisik</label>
          <input type="checkbox" id="e_book" name="jenis_buku[]" value="E-Book" class="mr-2">
          <label for="e_book">E-Book</label>
        </div>
      </div>

      <!-- Baris 3 -->
      <div>
        <label for="kategori" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Kategori</label>
        <select id="kategori" name="kategori" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]">
          <option disabled selected>Pilih kategori</option>
           <% if (typeof kategori !== 'undefined' && kategori.length > 0) { %>
          <% kategori.forEach(function(item) { %>
        <option value="<%= item.id %>"><%= item.nama_kategori %></option>
        <% }); %>
    <% } else { %>
      <option disabled>Tidak ada kategori tersedia</option>
    <% } %>
        </select>
      </div>
      <div>
        <label for="isbn" class="block text-xs font-semibold text-[#2f6f4e] mb-1">ISBN</label>
        <input type="text" id="isbn" name="isbn" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>

      <!-- Baris 4 -->
      <div>
        <label for="pengarang" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Pengarang</label>
        <input type="text" id="pengarang" name="pengarang" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>
      <div>
      <label for="tahun_terbit" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Tahun Terbit</label>
      <select 
      name="tahun_terbit"
      id="tahun_terbit"
      class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]"
      >
          <% 
            const currentYear = new Date().getFullYear(); 
            for (let year = currentYear; year >= 1950; year--) { 
          %>
            <option value="<%= year %>"><%= year %></option>
          <% } %>
        </select>
      </div>


      <!-- Baris 5 -->
      <div>
        <label for="penerbit" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Penerbit</label>
        <input type="text" id="penerbit" name="penerbit" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>
      <div>
        <label for="jumlah_halaman" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Jumlah Halaman</label>
        <input type="number" id="jumlah_halaman" min="1" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>

      <!-- Baris 6 -->
      <div>
        <label for="lokasi_penyimpanan" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Lokasi Penyimpanan</label>
        <select id="lokasi_penyimpanan" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]">
          <option disabled selected>Pilih lokasi</option>
          <option>American Corner – Sayap Kanan Lt.2</option>
          <option>Minangkabau Corner Lt. 3</option>
          <option>Ruang Lokal Konten – Skripsi</option>
          <option>Ruang Referensi – Sayap Kiri Lantai 2</option>
          <option>Ruang Sirkulasi 2 – Sayap Kanan Lantai 1</option>
          <option>Ruang Sirkulasi Utama – Sayap Kiri Lantai 1</option>
        </select>
      </div>
      <div>
        <label for="jumlah_stok" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Jumlah Stok</label>
        <input type="number" id="jumlah_stok" min="1" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
      </div>

      <!-- Baris 7 -->
      <div>
        <label for="deskripsi" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Deskripsi</label>
        <textarea id="deskripsi" rows="5" name="deskripsi" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]"></textarea>
      </div>
      <div class="flex flex-col gap-4">
        <div>
          <label for="upload_pdf" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Upload PDF</label>
          <input type="file" id="upload_pdf" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
        </div>
        <div>
          <label for="upload_sampul" class="block text-xs font-semibold text-[#2f6f4e] mb-1">Upload Sampul</label>
          <input type="file" id="upload_sampul" class="w-full bg-[#f0f6f3] border border-transparent rounded-md py-2 px-3 text-sm text-[#2f6f4e] focus:outline-none focus:ring-2 focus:ring-[#2f6f4e]" />
        </div>
      </div>
    </div>

        <!-- Tombol -->
        <div class="flex justify-end gap-4 mt-6">
          <button
              class="bg-[#e8c75a] text-white text-xs font-semibold rounded-md py-2 px-6 shadow-md hover:bg-[#d4b44a] transition"
              type="button"
            >
              Batal
            </button>
            <button
              class="bg-[#2f6f4e] text-white text-xs font-semibold rounded-md py-2 px-6 shadow-md hover:bg-[#255a3f] transition"
              type="submit"
            >
              Simpan
            </button>
        </div>
      </form>
    </div>
  </div>
  <script>
  const checkboxFisik = document.getElementById('buku_fisik');
  const checkboxEbook = document.getElementById('e_book');
  const lokasi = document.getElementById('lokasi_penyimpanan');
  const uploadPdf = document.getElementById('upload_pdf');

  function updateFormFields() {
    const isFisik = checkboxFisik.checked;
    const isEbook = checkboxEbook.checked;

    lokasi.disabled = !isFisik;
    uploadPdf.disabled = !isEbook;

    lokasi.classList.toggle('bg-gray-100', !isFisik);
    uploadPdf.classList.toggle('bg-gray-100', !isEbook);
  }

  checkboxFisik.addEventListener('change', updateFormFields);
  checkboxEbook.addEventListener('change', updateFormFields);

  updateFormFields(); // Jalankan di awal
</script>

</body>
</html>
